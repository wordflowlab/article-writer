# 公众号写作工作区

> **工作区标识**: wechat
> **适用平台**: 微信公众号、小红书、知乎文章
> **内容类型**: 图文文章

---

## 工作区特点

- **目标平台**: 微信公众号、小红书、知乎
- **内容类型**: 图文文章
- **字数范围**: 2000-5000 字
- **AI 味目标**: < 30%

---

## 质量标准

### 段落控制

- ✅ 每段不超过 150 字
- ✅ 手机屏幕 3-5 行为佳
- ✅ 避免大段文字（超过 200 字的段落要拆分）
- ✅ 适当使用空行分隔（增强可读性）

**为什么要控制段落**:
公众号在手机端阅读，大段文字会造成视觉疲劳。短段落 + 空行 = 更好的阅读体验。

---

### 配图要求

- ✅ **数量**: 5-8 张图（必须）
- ✅ **尺寸**: 900×500px（公众号最佳比例）
- ✅ **首图**: 必须有，吸引点击
- ✅ **核心观点**: 必须配图说明

**配图原则**:
1. 开头引入图（吸引注意）
2. 每个核心观点配图（增强理解）
3. 数据对比配图表（提升说服力）
4. 结尾总结图（强化记忆）

**执行要求**:
- `/images` 命令必须实际完成配图，不只是给建议
- 图片保存到 `images/` 目录
- 自动插入 Markdown 引用

---

### 敏感词检测

**必须检测的类别**:
- ✅ 政治敏感词（国家、领导人等）
- ✅ 色情暴力词汇
- ✅ 广告法禁用词（"最"、"第一"、"唯一"等）
- ✅ 宗教、民族敏感词

**处理方式**:
- 替换为同义词
- 删除不必要的夸大表达
- 使用委婉表达

---

## 任务类型判断（第二层）

检测到用户需求后，判断任务类型：

### A. 新写作任务（有完整 brief）

**识别特征**:
- 用户已提供详细需求文档
- 包含标题、目标读者、字数要求等

**执行流程**:
```
/brief-save → /research → /topic-discuss → /materials-search → /write-draft → /audit → /images → /final-check
```

**注意事项**:
- ⭐ `/topic-discuss` 必须执行，等待用户选择
- ⭐ 选题讨论后，等待用户确认再继续
- ⭐ 不要跳过任何步骤

---

### B. 新写作任务（无 brief 只有需求）

**识别特征**:
- 用户只提供简短描述："写一篇关于 XX 的文章"
- 缺少详细要求

**执行流程**:
```
/brief-save（AI 补充详细信息）→ /topic-discuss → /materials-search → /write-draft → /audit → /images
```

**注意事项**:
- `/brief-save` 时，AI 要主动询问补充信息：
  - 目标读者是谁？
  - 期望字数？
  - 文章定位（干货/经验/观点/评测）？
  - 封面图要求？

---

### C. 修改已有文章

**识别特征**:
- 用户要求"修改"、"优化"已有文章
- 提供了原文路径

**执行流程**:
```
Read 原文 → 理解修改需求 → 修改 → /audit style（可选）
```

**注意事项**:
- 不走完整九步流程
- 只执行修改相关步骤
- 如果修改较大，建议执行 `/audit style` 降 AI 味

---

### D. 文章审校/降 AI 味

**识别特征**:
- 用户要求"审校"、"降 AI 味"、"润色"
- 文章已完成，只需优化

**执行流程**:
```
/audit content → /audit style → /audit detail
```

**注意事项**:
- 严格按三遍审校顺序执行
- 不跳过任何一遍
- 重点关注第二遍（风格审校）降 AI 味

---

### E. 快速咨询

**识别特征**:
- 用户询问问题："怎么写好开头？"
- 不需要写完整文章

**执行流程**:
```
直接回答，不执行命令
```

**注意事项**:
- 不要误判为写作任务
- 给出简洁明确的建议

---

## 判断依据

### 关键词识别表

| 任务类型 | 关键词 | 示例 |
|---------|--------|------|
| **新写作（有 brief）** | "根据这个 brief"、"按照要求写" | "根据这个 brief 写一篇文章" |
| **新写作（无 brief）** | "写一篇"、"创作"、"输出" | "写一篇关于 Claude Code 的文章" |
| **修改任务** | "修改"、"改"、"优化"、"调整" | "帮我修改这篇文章的开头" |
| **审校任务** | "审校"、"降 AI 味"、"润色"、"检查" | "帮我降低这篇文章的 AI 味" |
| **咨询** | "怎么"、"如何"、"帮我看看"、"建议" | "怎么写好公众号标题？" |

### 明确确认原则

**如果不确定任务类型**:
1. 使用 AskUserQuestion 工具询问用户
2. 列出可能的任务类型让用户选择
3. **不要假设，不要自作主张**

**示例**:
```
我理解你想写一篇文章。请选择任务类型：
1. 新写作任务（我会先和你讨论选题）
2. 修改已有文章（请提供原文路径）
3. 只需要审校降 AI 味（请提供文章路径）
```

---

## 九步完整流程说明

### 1. /brief-save - 保存需求

**功能**: 将用户需求结构化保存

**输出文件**: `brief.md`

**包含信息**:
- 文章标题（或方向）
- 目标读者
- 字数要求
- 文章定位（干货/经验/观点/评测）
- 特殊要求（如配图、敏感词等）

---

### 2. /research - 信息搜索（可选）

**何时执行**:
- 需要最新数据（如产品价格、版本信息）
- 需要权威引用（如官方文档）
- 需要对比信息（如竞品对比）

**何时跳过**:
- 纯经验分享类文章
- 用户已提供所有素材
- 个人观点类文章

---

### 3. /topic-discuss - 选题讨论 ⭐

**⭐ 核心原则**: 必须执行，必须等待用户选择

**功能**: 提供 3-4 个选题方向，让用户选择

**输出格式**:
```
📝 基于您的需求，我准备了 4 个选题方向：

## 选题1: "我用 Claude Code 替代 Cursor 两周后，发现了这些真相"
**核心角度**: 第一人称真实体验 + 对比测试
**工作量评估**: ⭐⭐⭐⭐ (需要深度测试)
**大纲预览**: ...

## 选题2: ...

💡 请选择一个方向，或者告诉我你的想法。
⚠️ 我不会假设你的选择，请明确告诉我。
```

**注意事项**:
- 提供选题后，**必须停止**，等待用户输入
- 不要继续执行后续步骤（如 /write-draft）
- 不要假设用户会选择某个选题

---

### 4. /materials-search - 搜索个人素材库

**功能**: 搜索用户的真实素材（即刻/微博/Twitter 动态）

**搜索范围**:
- `materials/raw/*.csv` - 原始社交媒体导出
- `materials/indexed/*.md` - 主题索引

**改写原则**:
- ❌ 禁止直接复制粘贴
- ✅ 改写成长文逻辑
- ✅ 保留真实细节
- ✅ 增加上下文说明

---

### 5. /write-draft - 创作初稿

**功能**: 基于选题和素材创作初稿

**输出文件**: `draft.md`

**写作要求**:
- 按照 specification.md 的要求写作
- 段落控制在 150 字以内
- 预留配图位置（用 `<!-- 配图：XX -->` 标注）
- 字数控制在目标范围 ±10%

---

### 6-8. /audit - 三遍审校 ⭐

**第一遍: /audit content**
- 检查事实准确性
- 检查逻辑严密性
- 检查结构完整性

**第二遍: /audit style ⭐**
- **降 AI 味核心步骤**
- 加载反 AI 检测规则库
- 系统化识别套话、句式、书面语
- 目标：AI 检测率 < 30%

**第三遍: /audit detail**
- 检查标点符号
- 检查格式一致性
- 检查段落长度
- 字数最终微调

---

### 9. /images - 文章配图 ⭐

**⭐ 公众号特有步骤**

**功能**: 自动完成配图，不只是建议

**执行流程**:
1. 分析文章，确定配图需求（5-8 张）
2. 按优先级获取图片：
   - 公共领域作品（Wikimedia Commons）
   - 官方素材（产品官网/GitHub）
   - AI 生成（可选）
   - 免费图库（Unsplash/Pexels）
3. 保存到 `images/` 目录
4. 自动插入 Markdown 引用

**输出示例**:
```markdown
Claude Code 的界面设计简洁直观。

![Claude Code界面](images/01-claude-code-interface.png)
*图1: Claude Code主界面*
```

---

## 核心原则（必须遵守）

### 1. 选题讨论必做 ⭐

**错误做法**:
❌ 用户说"写一篇文章"，AI 直接生成

**正确做法**:
✅ 用户说"写一篇文章"，AI 执行 `/topic-discuss`，提供 3-4 个选题，等待用户选择

**为什么**:
- 避免方向错误导致大量返工
- 让用户保持掌控感
- 确保选题符合用户预期

---

### 2. 素材库优先 ⭐

**原则**: 使用真实素材替代 100% AI 生成

**实施方法**:
1. `/materials-search` 搜索相关素材
2. 改写融入文章（不直接复制）
3. 保留真实细节（时间、数字、具体场景）

**为什么**:
- 真实素材是降 AI 味的核心方法
- AI 生成的"编造数据"容易被识别
- 真实细节增强文章可信度

---

### 3. 三遍审校必做 ⭐

**原则**: 系统化降低 AI 检测率

**执行顺序**: content → style → detail（不可跳过）

**为什么**:
- 一次性审校很难兼顾所有维度
- 分离关注点，效果更好
- 第二遍（style）是降 AI 味的核心

---

### 4. 配图必须完成 ⭐

**原则**: 不只是给建议，要实际完成配图

**执行要求**:
- 下载图片到 `images/` 目录
- 自动插入 Markdown 引用
- 生成图片清单

**为什么**:
- 公众号文章必须有配图
- 手动配图耗时且质量不稳定
- 自动化完成提升效率

---

## 工作区加载提示

当 AI 检测到当前工作区为 `wechat` 时，输出以下提示：

```
✅ 已加载 **公众号工作区**

📋 工作区规则:
- 段落控制: 每段 ≤ 150 字
- 配图要求: 5-8 张（必须完成）
- AI 味目标: < 30%
- 敏感词检测: 开启

🎯 核心原则:
1. 选题讨论必做（不直接写文章）
2. 素材库优先（使用真实素材）
3. 三遍审校必做（系统化降 AI 味）
4. 配图必须完成（不只是建议）

📝 接下来我会严格遵循公众号写作规则。
```

---

**文件版本**: v1.0
**最后更新**: 2025-01-26
**维护**: Article Writer Team
