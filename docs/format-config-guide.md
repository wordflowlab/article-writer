# format-config 命令使用指南

## 🎯 快速开始

`/format-config` 是一个**交互式配置器**,让你通过 CLI 界面快速定制微信格式化样式。

### 命令列表

```bash
/format-config                # 交互式配置样式
/format-config --reset        # 重置为默认配置
/format-config --save-preset  # 保存当前配置为预设
/format-config --load-preset  # 加载已保存的预设
/format-config --help         # 显示帮助信息
```

## 📖 完整使用流程

### Step 1: 查看当前配置

命令会先显示你的当前配置:

```
📋 当前配置:
  主题: default
  主题色: 经典蓝 (稳重冷静)
  字号: 16px
  字体: -apple-system...
  首行缩进: 否
  两端对齐: 否
  代码行号: 否
  链接转脚注: 是
  自动预览: 否

? 是否要修改配置? (Y/n)
```

### Step 2: 选择主题

使用方向键 ↑↓ 选择,Enter 确认:

```
? 选择主题 ›
  ○ 经典 - 经典样式,适合大多数场景
  ● 优雅 - 圆角阴影效果,适合设计/生活类文章
  ○ 简洁 - 扁平化设计,适合技术/极简风文章
```

### Step 3: 选择主题色

11种预设颜色,或选择"自定义"输入十六进制:

```
? 选择主题色 ›
  ○ 经典蓝 (稳重冷静)
  ● 翡翠绿 (自然平衡)
  ○ 活力橘 (热情活力)
  ○ 柠檬黄 (明亮温暖)
  ○ 薰衣紫 (优雅神秘)
  ○ 天空蓝 (清爽自由)
  ○ 玫瑰金 (奢华现代)
  ○ 橄榄绿 (沉稳自然)
  ○ 石墨黑 (内敛极简)
  ○ 雾烟灰 (柔和低调)
  ○ 樱花粉 (浪漫甜美)
  ○ 自定义(输入十六进制)
```

如果选择"自定义":

```
? 输入十六进制颜色值(如 #3f51b5) › #009874
```

### Step 4: 选择字号

```
? 选择字号 ›
  ○ 14px (更小)
  ○ 15px (稍小)
  ● 16px (推荐)
  ○ 17px (稍大)
  ○ 18px (更大)
```

### Step 5: 选择字体

```
? 选择字体 ›
  ● 无衬线 - 适合现代感强的文章
  ○ 衬线 - 适合传统、正式的文章
  ○ 等宽 - 适合技术类文章
```

### Step 6: 开关选项

连续回答 5 个是/否问题:

```
? 段落首行缩进? › no
? 文本两端对齐? › no
? 代码块显示行号? › no
? 链接转为脚注? › yes
? 自动打开浏览器预览? › no
```

### Step 7: 确认并保存

最后会显示新配置预览,确认后保存:

```
✨ 新配置预览:
  主题: grace
  主题色: 翡翠绿 (自然平衡)
  字号: 16px
  字体: -apple-system...
  首行缩进: 否
  两端对齐: 否
  代码行号: 否
  链接转脚注: 是
  自动预览: 否

? 确认保存此配置? › yes

✓ 配置已保存到 .content/config.json
✓ 下次运行 /publish 时将使用新配置
```

## 💡 使用技巧

### 快速跳过不需要修改的选项

如果某个选项已经是你想要的,直接按 Enter 跳过:

```
? 选择字号 › 16px (推荐)  <--- 直接 Enter,保持不变
```

### 自定义颜色的格式

必须使用标准十六进制格式 `#RRGGBB`:

- ✅ 正确: `#3f51b5`, `#009874`, `#FA5151`
- ❌ 错误: `3f51b5` (缺少 #), `#3f5` (不足 6 位)

### 保存多套配置(使用预设功能)

如果你经常在不同风格间切换,推荐使用配置预设功能:

```bash
# 1. 配置技术文章样式
/format-config
# (选择 simple 主题, 蓝色等)

# 2. 保存为预设
/format-config --save-preset
> 为此预设命名: tech
✓ 已保存预设: tech

# 3. 配置生活文章样式
/format-config
# (选择 grace 主题, 玫瑰金等)

# 4. 保存为预设
/format-config --save-preset
> 为此预设命名: life
✓ 已保存预设: life

# 5. 快速切换
/format-config --load-preset
> 选择: tech  # 或 life
```

### 重置为默认配置

如果配置混乱,可以一键重置:

```bash
/format-config --reset

? 确认重置为默认配置? yes
✓ 已重置为默认配置
```

## 🎨 配置建议

### 技术文章推荐配置

```
主题: simple (简洁)
主题色: 经典蓝 (#0F4C81) 或 石墨黑 (#333333)
字号: 16px
字体: 无衬线 或 等宽
首行缩进: 否
两端对齐: 否
代码行号: 否(根据需要)
链接转脚注: 是
```

### 生活/设计文章推荐配置

```
主题: grace (优雅)
主题色: 玫瑰金 (#B76E79) 或 樱花粉 (#FFB7C5)
字号: 16px
字体: 衬线
首行缩进: 否(微信一般不用)
两端对齐: 否
代码行号: 否
链接转脚注: 是
```

### 通用文章推荐配置

```
主题: default (经典)
主题色: 经典蓝 (#0F4C81)
字号: 16px
字体: 无衬线
首行缩进: 否
两端对齐: 否
代码行号: 否
链接转脚注: 是
```

## 🔧 故障排查

### 问题 1: 找不到配置文件

**症状**: `❌ 错误: 未找到 .content/config.json`

**原因**: 不在项目根目录

**解决**:
```bash
# 切换到项目目录
cd workspaces/wechat/articles/你的文章名

# 确认目录结构
ls -la .content/
```

### 问题 2: 颜色格式错误

**症状**: `❌ 无效的颜色格式,请使用 #RRGGBB 格式`

**原因**: 颜色值格式不正确

**解决**: 使用 `#` 开头 + 6 位十六进制
- ✅ `#3f51b5`
- ❌ `3f51b5`

### 问题 3: 配置未生效

**症状**: 修改后 `/publish` 样式没变

**解决**:
```bash
# 1. 确认配置保存成功
cat .content/config.json | grep "grace"

# 2. 删除旧输出
rm -rf publish/wechat.html

# 3. 重新发布
/publish wechat
```

## 📚 相关命令

- `/publish wechat` - 使用当前配置生成格式化 HTML
- 查看完整文档: `docs/wechat-formatting.md`
- 命令详细说明: `templates/commands/format-config.md`

## 🎯 下一步

配置完成后:

1. 运行 `/publish wechat` 生成 HTML
2. 在浏览器中预览效果
3. 根据预览效果调整配置
4. 满意后复制到微信公众号编辑器

---

**提示**: 如果只是简单调整,推荐直接对 AI 说 "换成 grace 主题",更快捷!
