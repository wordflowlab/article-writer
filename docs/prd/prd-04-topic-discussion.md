# PRD-04: 选题讨论机制

> **优先级**: P1（重要功能）
> **预计工作量**: 1 天
> **负责人**: Claude
> **状态**: ✅ 已完成

---

## 1. 需求背景

### 1.1 问题陈述

**用户痛点**:
> "AI 经常自作主张。你让它写文章，它直接给你生成一篇。你要的是'先讨论选题，再写'，但它跳过了讨论环节。"

**核心问题**:
- AI 假设用户需求，不等待确认
- 方向错误导致大量返工
- 用户失去掌控感

### 1.2 解决方案

**选题讨论机制**:
1. AI 提供 3-4 个选题方向
2. 每个方向包含：标题、角度、大纲、工作量评估
3. **等待用户选择**（不假设）
4. 用户选择后才继续

---

## 2. 核心功能

### 2.1 选题生成

**/topic-discuss 命令输出格式**:

```
📝 基于您的需求，我准备了 4 个选题方向：

---

## 选题1: "我用 Claude Code 替代 Cursor 两周后，发现了这些真相"

**核心角度**: 第一人称真实体验 + 对比测试
**工作量评估**: ⭐⭐⭐⭐ (需要深度测试)

**优势:**
- 真实性强，容易获得读者信任
- 对比有说服力

**劣势:**
- 需要至少 2 周真实使用数据
- 测试工作量大

**需要真实测试:** 是
- 至少 3 个实际项目测试
- 性能对比数据

**大纲预览**(预计 3200 字):

1. **开头 - 为什么要换工具**(300 字)
2. **核心对比 - 5 个关键维度**(1500 字)
3. **深度体验 - 3 个实际场景**(800 字)
4. **数据总结 - 客观结论**(400 字)
5. **结尾 - 推荐建议**(200 字)

---

## 选题2: "Claude Code vs Cursor: 程序员必看的 2025 年 AI 工具选购指南"

**核心角度**: 选购指南 + 决策树
**工作量评估**: ⭐⭐⭐ (中等，更多依赖调研)

...

---

💡 **请选择一个方向，或者:**
- 输入 "1-4" 选择对应选题
- 输入 "组合" - 融合多个选题的优点
- 输入 "调整" - 基于某个选题微调
- 输入 "重新" - 提供新的方向

⚠️ **重要:** 我不会假设你的选择，也不会自己决定。请明确告诉我你的选择后，我再继续。
```

### 2.2 强制等待机制

**实现方式**: 在命令模板中明确说明

```markdown
## 核心原则

1. **不要自作主张** - 绝不假设用户会选哪个
2. **提供足够信息** - 让用户能做出明智决策
3. **工作量透明** - 明确标注需要的测试/调研工作
4. **大纲预览** - 让用户看到具体会写什么

## 等待用户选择

提供选题后，**必须停止**，等待用户输入。

不要继续执行后续步骤（如 /write-draft）。

不要假设用户会选择某个选题。
```

### 2.3 用户选择后

**AI 响应**:
```
✅ 您选择了: 选题1 - "我用 Claude Code 替代 Cursor 两周后，发现了这些真相"

📊 工作量评估:
- 预计字数: 3200 字
- 测试任务: 3 个实际项目
- 预计耗时: 2-3 天(含测试)

💡 下一步:
1. /collab-doc - 创建测试任务清单
2. 完成测试后，提供数据
3. /write-draft - 开始写作

或输入 "continue" 继续流程
```

---

## 3. 技术方案

### 3.1 实现步骤

#### Day 1: 更新命令模板

1. 修改 `templates/commands/topic-discuss.md`
2. 增强选题格式（大纲预览、工作量评估）
3. 添加"强制等待"说明
4. 测试 AI 是否真的等待

---

## 4. 验收标准

### 4.1 功能验收

**测试用例: 强制等待**
```
✅ 执行: /topic-discuss
✅ 预期:
   - AI 输出 3-4 个选题
   - AI 停止，不继续执行
   - AI 明确提示"等待用户选择"
   - 用户选择后才继续
```

### 4.2 质量标准

- ✅ 100% 等待用户确认（不自作主张）
- ✅ 选题包含完整信息（大纲/工作量/优劣势）
- ✅ 提供至少 3 个方向

---

## 6. 实现总结

### 6.1 已实现功能

✅ **选题格式增强**
- 添加工作量评估星级 (⭐⭐⭐⭐)
- 添加"需要真实测试"字段
- 添加"预计耗时"说明
- 4个完整示例方向,涵盖不同工作量级别

✅ **强制等待机制**
- 3重警告标记 (⚠️ ⚠️ ⚠️)
- 明确禁止的行为列表
- 明确正确的行为列表
- 验证方法说明

✅ **命令模板完善**
- `templates/commands/topic-discuss.md` 已包含所有PRD要求
- 包含4个差异化示例方向
- 包含用户选择后的处理流程
- 包含Q&A和常见问题处理

### 6.2 验收标准达成

- ✅ 100% 等待用户确认（强制等待机制已明确）
- ✅ 选题包含完整信息（大纲/工作量/优劣势/预计耗时）
- ✅ 提供至少 3 个方向（模板提供4个示例）
- ✅ 工作量评估透明（星级+耗时+测试需求）

### 6.3 文件变更

**Modified**:
- `templates/commands/topic-discuss.md` - 增强选题格式和等待机制
- `docs/prd/prd-04-topic-discussion.md` - 更新状态为已完成

---

**PRD 状态**: ✅ 已完成 (2025-10-26)
